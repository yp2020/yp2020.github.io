Redis 使用了单线程架构和 I/O 多路复用模型来实现高性能的内存数据库服务。

Redis 客户端，每次向服务端发送命令都会经过 3 个过程：发送命令，执行命令，返回结果。

因为 Redis 是单线程来处理命令的，所以一条命令到达服务端之后不会立刻被执行，所有命令都会进入一个队列中，然后逐个被执行。

如果有多个客户端同时发送命令，这些命令的执行的先后顺序不一定，但是不会有 2 条命令同时被执行。

## redis 为什么单线程还可以这么快？

1. Redis 的访问和计算都是基于内存的，redis 的所有数据都放在了内存中，所有的计算都是内存级别的计算。内存本来就很快。
2. Redis 使用非阻塞 IO 来处理客户端的连接,  Redis 使用 epoll 作为 I/O 多路复用技术的实现，再加上 Redis 自身的事件处理模型将 epoll 中的连接，读写，关闭都转换为事件，不会在网络 IO 上浪费过多的时间。
3. 单线程避免了线程切换和竞争产生的消耗，线程切换涉及到状态保存以及锁机制，会对性能造成比较大的影响。

## redis 单线程带来的问题

每个命令的执行时间有要求，如果某个命令执行时间过长，会造成其他命令的阻塞。如 `keys` 

